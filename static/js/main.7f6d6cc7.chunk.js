(this.webpackJsonplearn=this.webpackJsonplearn||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/refresh_icon.4ed12d61.svg"},35:function(e,t,a){e.exports=a.p+"static/media/best_loader.2c9b45c9.gif"},36:function(e,t,a){e.exports=a(93)},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),i=a(16),s=a(3),c=a(4),o=a(6),l=a(5),u=a(0),m=a.n(u),h=a(30),p=a.n(h),d=a(31),f=a.n(d),g=(a(83),a(84),function(e){return m.a.createElement("div",{className:"location"},m.a.createElement("h1",null,e.city))}),y=(a(85),a(8)),v=a.n(y),E=function(e){var t;switch(e){case"Clouds":t="CLOUDY";break;case"Rain":t="RAIN";break;default:t="CLEAR_DAY"}return t},w=function(e){return e>0?"+"+e:e<0?"-"+e:e},k=function(e){var t=e.lang,a=Math.round(e.tempNow.main.temp),n=Math.round(e.tempNow.main.feels_like);return m.a.createElement("div",{className:"todayTemp"},m.a.createElement("div",{className:"Temp"},w(a),"\xb0"),m.a.createElement("div",{className:"WeatherImage"},m.a.createElement(v.a,{icon:E(e.tempNow.weather[0].main),color:"LemonChiffon",size:94,animate:!0})),m.a.createElement("div",{className:"WeatherProps"},m.a.createElement("h3",null,e.tempNow.weather[0].description.toUpperCase()),m.a.createElement("h3",null,function(e){return console.log(e),"ru"===e?"\u041e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a:":"en"===e?"Feeling like:":void 0}(t)," ",w(n),"\xb0"),m.a.createElement("h3",null,function(e){return"ru"===e?"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c:":"en"===e?"Humidity:":void 0}(t)," ",e.tempNow.main.humidity,"% "),m.a.createElement("h3",null,function(e){return"ru"===e?"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430:":"en"===e?"Wind speed:":void 0}(t)," ",Math.round(e.tempNow.wind.speed)," \u041c/\u0421")))},b=(a(88),function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={time:(new Date).toLocaleString()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"tick",value:function(){this.setState({time:(new Date).toLocaleString()})}},{key:"render",value:function(){return m.a.createElement("div",{className:"weather_today_block"},m.a.createElement(g,{city:this.props.temper.name}),m.a.createElement("div",{className:"datetime"}," ",this.state.time),m.a.createElement(k,{tempNow:this.props.temper,lang:this.props.lang}))}}]),a}(m.a.Component)),N=(a(89),function(e){var t;switch(e){case"Clouds":t="CLOUDY";break;case"Rain":t="RAIN";break;default:t="CLEAR_DAY"}return t}),C=function(e){return e>0?"+"+e:e<0?"-"+e:e},T=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=Math.round(this.props.threeDayWeather.list[8].main.temp),t=Math.round(this.props.threeDayWeather.list[16].main.temp),a=Math.round(this.props.threeDayWeather.list[24].main.temp),n=function(e,t){if("ru"===t){return["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][new Date(e).getDay()]}if("en"===t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e).getDay()]}};return m.a.createElement("div",{className:"weather_days_block"},m.a.createElement("div",{className:"day_block"},m.a.createElement("div",{className:"weekdayText"},n(this.props.threeDayWeather.list[8].dt_txt,this.props.lang)),m.a.createElement("div",{className:"weekdayTemp"},C(e),"\xb0"),m.a.createElement("div",{className:"weatherPic"},m.a.createElement(v.a,{icon:N(this.props.threeDayWeather.list[8].weather[0].main),color:"LemonChiffon",size:60,animate:!0}))),m.a.createElement("div",{className:"day_block"},m.a.createElement("div",{className:"weekdayText"},n(this.props.threeDayWeather.list[16].dt_txt,this.props.lang)),m.a.createElement("div",{className:"weekdayTemp"},C(t),"\xb0"),m.a.createElement("div",{className:"weatherPic"},m.a.createElement(v.a,{icon:N(this.props.threeDayWeather.list[16].weather[0].main),color:"LemonChiffon",size:60,animate:!0}))),m.a.createElement("div",{className:"day_block"},m.a.createElement("div",{className:"weekdayText"},n(this.props.threeDayWeather.list[24].dt_txt,this.props.lang)),m.a.createElement("div",{className:"weekdayTemp"},C(a),"\xb0"),m.a.createElement("div",{className:"weatherPic"},m.a.createElement(v.a,{icon:N(this.props.threeDayWeather.list[24].weather[0].main),color:"LemonChiffon",size:60,animate:!0}))))}}]),a}(m.a.Component),_=(a(90),function(e){return m.a.createElement("div",{className:"longitude_info"},function(e){return"ru"===e?"\u0414\u043e\u043b\u0433\u043e\u0442\u0430:":"en"===e?"Longitude:":void 0}(e.lang)," ",e.lat)}),D=(a(91),function(e){return m.a.createElement("div",{className:"attitude_info"},function(e){return"ru"===e?"\u0428\u0438\u0440\u043e\u0442\u0430:":"en"===e?"Attitude:":void 0}(e.lang)," ",e.lng)}),j=a(19),O=(a(92),function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return console.log(this.props.city.results[0].geometry.lat),console.log(this.props.city.results[0].geometry.lng),m.a.createElement("div",{className:"geolocation"},m.a.createElement(j.b,null,m.a.createElement("div",{className:"map"},m.a.createElement(j.a,{defaultState:{center:[this.props.city.results[0].geometry.lat,this.props.city.results[0].geometry.lng],zoom:8},state:{center:[this.props.city.results[0].geometry.lat,this.props.city.results[0].geometry.lng],zoom:8},className:"mapMini"}))),m.a.createElement(_,{lat:this.props.city.results[0].geometry.lat,lang:this.props.lang}),m.a.createElement(D,{lng:this.props.city.results[0].geometry.lng,lang:this.props.lang}))}}]),a}(m.a.Component)),S=a(34),x=a.n(S),B=a(35),R=a.n(B),W=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).switchBackgroundHandler=function(){},e.languageSelectorHandler=function(t){console.log(t.target.value),e.setState({lang:t.target.value},(function(){return e.getRequest(e.state.cityName)}))},e.farenheitButtonHandler=function(){e.state.weather&&e.state.forecast&&e.setState({unitsType:"imperial"},(function(){return e.translateTemperature("imperial")}))},e.celsiumButtonHandler=function(){e.state.weather&&e.state.forecast&&e.setState({unitsType:"metric"},(function(){return e.translateTemperature("metric")}))},e.searhBtnHandler=function(t){e.getRequest(t)},e.handleOnchange=function(t){e.setState({cityName:t.target.value})},e.handleChange=function(t){"Enter"==t.key&&e.searhBtnHandler(e.state.cityName)},e.state={weather:null,forecast:null,myPosition:null,city:null,lang:"en",unitsType:"metric",picture:null,cityName:null,loading:!0},e}return Object(c.a)(a,[{key:"farenheitToC",value:function(e){return 5/9*(e-32)}},{key:"CTofarenheit",value:function(e){return 1.8*e+32}},{key:"translateTemperature",value:function(e){var t=this.state.forecast,a=this.state.weather;console.log(t);var n=a.main.temp,r=a.main.feels_like;"metric"===e?(a.main.temp=this.farenheitToC(n),a.main.feels_like=this.farenheitToC(r),t.list[8].main.temp=this.farenheitToC(t.list[8].main.temp),t.list[16].main.temp=this.farenheitToC(t.list[16].main.temp),t.list[24].main.temp=this.farenheitToC(t.list[24].main.temp)):(a.main.temp=this.CTofarenheit(n),a.main.feels_like=this.CTofarenheit(r),t.list[8].main.temp=this.CTofarenheit(t.list[8].main.temp),t.list[16].main.temp=this.CTofarenheit(t.list[16].main.temp),t.list[24].main.temp=this.CTofarenheit(t.list[24].main.temp)),this.setState({weather:a}),this.setState({forecast:t})}},{key:"render",value:function(){var e=this;return m.a.createElement(f.a,{loading:this.state.loading,bgColor:"#f1f1f1",spinnerColor:"#9ee5f8",textColor:"#676767",logoSrc:R.a,text:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u0447\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u043a \u0441\u0442\u0430\u0440\u0430\u0435\u0442\u0441\u044f"},m.a.createElement("div",{className:"wrapper",id:"wrapper"},m.a.createElement("div",{className:"controlBlock"},m.a.createElement("div",{className:"wrapperButtons"},m.a.createElement("div",{className:"switchBackgroundButton",id:"refresh",onClick:function(){return e.switchBackgroundHandler()}},m.a.createElement("img",{className:"refresh",id:"refresher",src:x.a})),m.a.createElement("div",{className:"dropdown"},m.a.createElement("select",{className:"droplist_base",id:"languageSelector",onChange:this.languageSelectorHandler},m.a.createElement("option",{value:"en"},"En"),m.a.createElement("option",{value:"ru"},"Ru"))),m.a.createElement("div",{className:"wrapper-radio_btns"},m.a.createElement("button",{disabled:"imperial"===this.state.unitsType,className:"button_farenheit ".concat("imperial"===this.state.unitsType?"focused_temp":""),id:"farenheitButton",onClick:function(){return e.farenheitButtonHandler()}}),m.a.createElement("button",{disabled:"metric"===this.state.unitsType,className:"button_celsium ".concat("metric"===this.state.unitsType?"focused_temp":""),id:"celsiumButton",onClick:function(){return e.celsiumButtonHandler()}}))),m.a.createElement("div",{className:"wrapper_search"},m.a.createElement("input",{className:"input_base",id:"searchCity",type:"search",placeholder:"Search city",onChange:this.handleOnchange,onKeyPress:this.handleChange}),m.a.createElement("div",{className:"btn-search",id:"searchBtn",onClick:function(){return e.searhBtnHandler(e.state.cityName)}}," SEARCH "))),m.a.createElement("div",{className:"weatherWrapper"},this.state.weather&&m.a.createElement(b,{temper:this.state.weather,lang:this.state.lang}),this.state.forecast&&m.a.createElement(T,{threeDayWeather:this.state.forecast,lang:this.state.lang})),this.state.city&&m.a.createElement(O,{city:this.state.city,lang:this.state.lang})))}},{key:"getRequest",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,this.launchRequest("weather",t,null);case 3:if(a.weather=e.sent,!a.weather){e.next=15;break}return e.next=7,this.launchRequest("forecast",t,null);case 7:return a.forecast=e.sent,e.next=10,this.launchRequest("coord",t,null);case 10:a.city=e.sent,a.cityName=t,a.loading=!1,this.setState(a),console.log(this.state);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"launchRequest",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n){var i,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getLink(t,a,n),e.next=3,fetch(i);case 3:return s=e.sent,e.next=6,s.json();case 6:if(c=e.sent,console.log(c,"\u0437\u0430\u043f\u0440\u043e\u0441\u0435\u0446"),"city not found"!==c.message&&0!==c.total_results){e.next=12;break}return e.abrupt("return",alert("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0440\u043e\u0434"));case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getLink",value:function(e,t,a){var n;switch(e){case"weather":n="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&lang=").concat(this.state.lang,"&units=").concat(this.state.unitsType,"&appid=28c72f6418a6f4fdf083d18908206742");break;case"forecast":n="https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&lang=").concat(this.state.lang,"&units=").concat(this.state.unitsType,"&APPID=28c72f6418a6f4fdf083d18908206742");break;case"coord":n="https://api.opencagedata.com/geocode/v1/json?q=".concat(t,"&key=6eefb8f093e64e4b865c3281df69b384");break;case"city":n="https://api.opencagedata.com/geocode/v1/json?q=".concat(a.latitude,"+").concat(a.longitude,"&language=de&key=6eefb8f093e64e4b865c3281df69b384");break;case"picture":n="https://api.unsplash.com/photos/random?orientation=landscape&per_page=1&query=nature&client_id=175FYCnNB3FK0X4DTIHQ3Yf05v5ewj0pg_I5UKSm5x4"}return n}},{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){var e=this;window.navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords.latitude,t.coords.longitude),e.launchRequest("city",null,t.coords).then((function(t){return e.getRequest(t.results[0].components.city).then((function(){return e.setState}))})),console.log(e.state,"state willmount")}),(function(){return e.setState({loading:!1})}))}}]),a}(m.a.Component);p.a.render(m.a.createElement(W,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.7f6d6cc7.chunk.js.map